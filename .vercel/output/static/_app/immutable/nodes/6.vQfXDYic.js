import{e as W,a as N,t as I,n as X,s as V}from"../chunks/disclose-version.COp2Sx5X.js";import{i as Y}from"../chunks/legacy.C6dZd77_.js";import{q as Z,t as $,r as ee,e as s,i,v as t,w as r,x as a,z as l}from"../chunks/runtime.DExCUZGw.js";import{i as G}from"../chunks/preload-helper.DocKlGQB.js";import{b as p,r as v}from"../chunks/input.DoOhNRNz.js";import{p as re}from"../chunks/event-modifiers.Bfc47y5P.js";import{s as U}from"../chunks/supabase.BhBeyELt.js";var ae=I('<div class="bg-red-50 border-l-4 border-red-400 p-4" role="alert"><p class="text-sm text-red-700"> </p></div>'),se=X('<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),te=I('<div class="min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8 bg-gray-50"><div class="sm:mx-auto sm:w-full sm:max-w-md"><h2 class="mt-6 text-center text-3xl font-extrabold text-gray-900">Create your account</h2> <p class="mt-2 text-center text-sm text-gray-600">Or <a href="/login" class="font-medium text-indigo-600 hover:text-indigo-500">sign in to your account</a></p></div> <div class="mt-8 sm:mx-auto sm:w-full sm:max-w-md"><div class="bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"><form class="space-y-6"><!> <div><label for="email" class="block text-sm font-medium text-gray-700">Email address</label> <div class="mt-1"><input id="email" name="email" type="email" required class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"></div></div> <div><label for="username" class="block text-sm font-medium text-gray-700">Username</label> <div class="mt-1"><input id="username" name="username" type="text" required class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"></div></div> <div><label for="fullName" class="block text-sm font-medium text-gray-700">Full Name</label> <div class="mt-1"><input id="fullName" name="fullName" type="text" required class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"></div></div> <div><label for="password" class="block text-sm font-medium text-gray-700">Password</label> <div class="mt-1"><input id="password" name="password" type="password" required class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"></div></div> <div><button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"><!> </button></div></form></div></div></div>');function ue(J,K){Z(K,!1);let f=l(""),g=l(""),m=l(""),x=l(""),d=l(!1),c=l("");async function L(){try{i(d,!0),i(c,"");const{data:e}=await U.from("profiles").select("username").eq("username",s(m)).single();if(e)throw new Error("Username already taken");const{data:{user:o},error:n}=await U.auth.signUp({email:s(f),password:s(g)});if(n)throw n;if(o){const{error:u}=await U.from("profiles").update({username:s(m),full_name:s(x)}).eq("id",o.id);if(u)throw u;window.location.href="/mindmaps"}}catch(e){i(c,e.message)}finally{i(d,!1)}}Y();var b=te(),C=t(r(b),2),E=r(C),w=r(E),z=r(w);{var Q=e=>{var o=ae(),n=r(o),u=r(n,!0);a(n),a(o),$(()=>V(u,s(c))),N(e,o)};G(z,e=>{s(c)&&e(Q)})}var y=t(z,2),R=t(r(y),2),j=r(R);v(j),a(R),a(y);var h=t(y,2),A=t(r(h),2),B=r(A);v(B),a(A),a(h);var _=t(h,2),D=t(r(_),2),F=r(D);v(F),a(D),a(_);var k=t(_,2),H=t(r(k),2),M=r(H);v(M),a(H),a(k);var O=t(k,2),q=r(O),P=r(q);{var S=e=>{var o=se();N(e,o)};G(P,e=>{s(d)&&e(S)})}var T=t(P);a(q),a(O),a(w),a(E),a(C),a(b),$(()=>{q.disabled=s(d),V(T,` ${(s(d)?"Registering...":"Register")??""}`)}),p(j,()=>s(f),e=>i(f,e)),p(B,()=>s(m),e=>i(m,e)),p(F,()=>s(x),e=>i(x,e)),p(M,()=>s(g),e=>i(g,e)),W("submit",w,re(L)),N(J,b),ee()}export{ue as component};
